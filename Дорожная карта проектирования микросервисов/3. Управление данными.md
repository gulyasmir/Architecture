# Управление данными

Внедрение SAGA, использование Event Sourcing для обеспечения согласованности в конечном итоге, обеспечение надёжной согласованности для критических операций, разделение данных для масштабируемости.

Управление данными в архитектуре микросервисов должно решать сразу несколько задач:

* **Согласованность данных.** Обеспечение согласованности данных в нескольких сервисах может быть затруднено из-за распределённой природы микросервисов. Например, когда пользователь оплачивает товар в корзине, информация из корзины в доставку должна попадать только в случае успешного списания денег со счёта клиента.
* **Целостность данных.** Поддержание корректности и надёжности данных при их распределении между различными сервисами. Данные об оплаченных товарах пользователем во всех системах: в каталоге товаров, личном кабинете, службе доставки — должны быть одинаковыми.
* **Производительность.** Операции с распределёнными данными могут вызывать задержку, что влияет на производительность системы, что решается за счёт масштабируемости, балансировки. Сбой складской системы может привести к невозможности получения службой доставки данных о товарах.
* **Конкурентность.** Обработка одновременного доступа к данным и их обновления без конфликтов. При некорректно спроектированных системах две системы могут пытаться одновременно списать складские остатки товара и количество может получиться отрицательным.
* **Доступность.** Обеспечение доступности данных для служб даже в случае сбоев. Каталог товаров должен отображаться даже в случае кратковременного сбоя.

В архитектуре микросервисов одним из наиболее сложных и ответственных аспектов является обработка данных. Обеспечение согласованности и целостности данных в распределённых сервисах сопряжено со значительными трудностями. Каждый микросервис обычно имеет свою базу данных, что создаёт проблемы, связанные с синхронизацией, согласованностью и транзакциями.

Сбой или обновление в одном сервисе может повлиять на другие, что требует тщательного планирования и оркестровки. Паттерн SAGA, когда изменения состояния фиксируются в виде последовательности событий, может помочь обеспечить согласованное представление данных во всех службах. Если сбой произошёл в одной из транзакций, остальные будут отменены.
